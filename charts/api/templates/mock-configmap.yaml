{{- if eq .Values.mode "mock" }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-mappings
data:
  health.json: |
    {
      "priority": 1,
      "request": {
        "method": "GET",
        "urlPath": "/health"
      },
      "response": {
        "status": 200,
        "body": "{\"status\": \"healthy\", \"database\": \"connected\"}",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  root.json: |
    {
      "priority": 1,
      "request": {
        "method": "GET",
        "urlPath": "/"
      },
      "response": {
        "status": 200,
        "body": "{\"service\": \"API Mock\", \"version\": \"1.0\", \"endpoints\": [\"/users\", \"/posts\", \"/health\"]}",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  users-list.json: |
    {
      "priority": 1,
      "request": {
        "method": "GET",
        "urlPath": "/users"
      },
      "response": {
        "status": 200,
        "body": "[{\"id\": 1, \"username\": \"alice\", \"email\": \"alice@example.com\", \"created_at\": \"2024-01-01T00:00:00\"}, {\"id\": 2, \"username\": \"bob\", \"email\": \"bob@example.com\", \"created_at\": \"2024-01-02T00:00:00\"}, {\"id\": 3, \"username\": \"charlie\", \"email\": \"charlie@example.com\", \"created_at\": \"2024-01-03T00:00:00\"}]",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  users-detail.json: |
    {
      "priority": 2,
      "request": {
        "method": "GET",
        "urlPathPattern": "/users/[0-9]+"
      },
      "response": {
        "status": 200,
        "body": "{\"id\": 1, \"username\": \"alice\", \"email\": \"alice@example.com\", \"created_at\": \"2024-01-01T00:00:00\"}",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  users-create.json: |
    {
      "priority": 1,
      "request": {
        "method": "POST",
        "urlPath": "/users"
      },
      "response": {
        "status": 201,
        "body": "{\"id\": 99, \"username\": \"newuser\", \"email\": \"new@example.com\", \"created_at\": \"2024-12-17T00:00:00\"}",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  posts-list.json: |
    {
      "priority": 1,
      "request": {
        "method": "GET",
        "urlPath": "/posts"
      },
      "response": {
        "status": 200,
        "body": "[{\"id\": 1, \"user_id\": 1, \"username\": \"alice\", \"title\": \"Hello World\", \"content\": \"My first post\", \"status\": \"published\", \"created_at\": \"2024-01-01T10:00:00\"}, {\"id\": 2, \"user_id\": 2, \"username\": \"bob\", \"title\": \"Second Post\", \"content\": \"Another post\", \"status\": \"published\", \"created_at\": \"2024-01-02T10:00:00\"}]",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  posts-detail.json: |
    {
      "priority": 2,
      "request": {
        "method": "GET",
        "urlPathPattern": "/posts/[0-9]+"
      },
      "response": {
        "status": 200,
        "body": "{\"id\": 1, \"user_id\": 1, \"username\": \"alice\", \"title\": \"Hello World\", \"content\": \"My first post\", \"status\": \"published\", \"created_at\": \"2024-01-01T10:00:00\"}",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  posts-create.json: |
    {
      "priority": 1,
      "request": {
        "method": "POST",
        "urlPath": "/posts"
      },
      "response": {
        "status": 201,
        "body": "{\"id\": 99, \"user_id\": 1, \"title\": \"New Post\", \"content\": \"Mock post content\", \"status\": \"draft\", \"created_at\": \"2024-12-17T00:00:00\"}",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
  user-posts.json: |
    {
      "priority": 2,
      "request": {
        "method": "GET",
        "urlPathPattern": "/users/[0-9]+/posts"
      },
      "response": {
        "status": 200,
        "body": "[{\"id\": 1, \"user_id\": 1, \"username\": \"alice\", \"title\": \"Hello World\", \"content\": \"My first post\", \"status\": \"published\", \"created_at\": \"2024-01-01T10:00:00\"}]",
        "headers": {
          "Content-Type": "application/json"
        }
      }
    }
{{- end }}
